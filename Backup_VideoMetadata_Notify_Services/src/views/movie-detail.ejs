<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= movie.title %> - Video Website</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <meta name="description" content="<%= movie.description || movie.title %>">
    <meta name="keywords" content="<%= movie.title %>, phim online, xem phim">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="nav-container">
            <a href="/" class="logo">VideoWeb</a>
            <nav>
                <ul class="nav-menu">
                    <li><a href="/">Trang chủ</a></li>
                    <li><a href="/movies">Phim lẻ</a></li>
                    <li><a href="/series">Phim bộ</a></li>
                    <li><a href="/ranking">Xếp hạng</a></li>
                    <li><a href="/search">Tìm kiếm</a></li>
                </ul>
            </nav>
            <button id="mobileMenuBtn" class="mobile-menu-btn">☰</button>
        </div>
    </header>

    <!-- Search Container -->
    <div class="search-container">
        <form id="searchForm" class="search-box">
            <input 
                type="text" 
                id="searchInput" 
                class="search-input" 
                placeholder="Tìm kiếm phim, diễn viên, thể loại..."
            >
            <button type="submit" class="search-btn">Tìm kiếm</button>
        </form>
        
        <!-- Filters -->
        <div class="filters">
            <select id="categoryFilter" class="filter-select">
                <option value="">- Tất cả -</option>
                <option value="movie">Phim Lẻ</option>
                <option value="series">Phim Bộ</option>
            </select>
            
            <select id="genreFilter" class="filter-select">
                <option value="">- Tất cả -</option>
                <option value="action">Hành động</option>
                <option value="drama">Tâm lý</option>
                <option value="comedy">Hài</option>
                <option value="horror">Kinh dị</option>
                <option value="romance">Lãng mạn</option>
                <option value="sci-fi">Khoa học viễn tưởng</option>
                <option value="thriller">Giật gân</option>
                <option value="animation">Hoạt hình</option>
            </select>
            
            <select id="countryFilter" class="filter-select">
                <option value="">- Tất cả -</option>
                <option value="us">Mỹ</option>
                <option value="kr">Hàn Quốc</option>
                <option value="jp">Nhật Bản</option>
                <option value="cn">Trung Quốc</option>
                <option value="vn">Việt Nam</option>
                <option value="th">Thái Lan</option>
            </select>
            
            <select id="yearFilter" class="filter-select">
                <option value="">- Tất cả -</option>
                <option value="2025">2025</option>
                <option value="2024">2024</option>
                <option value="2023">2023</option>
                <option value="2022">2022</option>
                <option value="2021">2021</option>
                <option value="2020">2020</option>
            </select>
            
            <select id="durationFilter" class="filter-select">
                <option value="">- Tất cả -</option>
                <option value="short">Dưới 30 phút</option>
                <option value="medium">30' - 1 tiếng</option>
                <option value="long">1 - 1.5 tiếng</option>
                <option value="very-long">Trên 1.5 tiếng</option>
            </select>
            
            <select id="sortFilter" class="filter-select">
                <option value="latest">Ngày cập nhật</option>
                <option value="release">Ngày phát hành</option>
                <option value="rating">Điểm đánh giá</option>
                <option value="views">Lượt xem</option>
            </select>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-container">
        <!-- Movie Detail -->
        <div class="movie-detail">
            <div class="movie-poster-large">
                <% if (movie.poster) { %>
                    <img src="<%= movie.poster %>" alt="<%= movie.title %>">
                <% } else { %>
                    <span>Không có ảnh</span>
                <% } %>
            </div>
            
            <div class="movie-detail-info">
                <h1><%= movie.title %></h1>
                
                <div class="movie-detail-meta">
                    <p><strong>Năm:</strong> <%= movie.year %></p>
                    <p><strong>Thời lượng:</strong> <%= movie.duration %></p>
                    <p><strong>Thể loại:</strong> <%= movie.genre %></p>
                    <p><strong>Quốc gia:</strong> <%= movie.country %></p>
                    <p><strong>Đạo diễn:</strong> <%= movie.director %></p>
                    <p><strong>Diễn viên:</strong> <%= movie.cast %></p>
                    <p><strong>Điểm đánh giá:</strong> 
                        <span style="color: #ffd700;">★ <%= movie.rating %></span>
                    </p>
                    <p><strong>Lượt xem:</strong> <%= (movie.views || 0).toLocaleString() %></p>
                </div>
                
                <div class="movie-description">
                    <h3>Tóm tắt</h3>
                    <p><%= movie.description %></p>
                </div>
                
                <% if (movie.type === 'series' && movie.episodes && movie.episodes.length > 0) { %>
                    <div class="episodes-section">
                        <h3>Tập phim</h3>
                        <div class="episode-list">
                            <% movie.episodes.forEach(function(episode) { %>
                                <a href="/player/<%= movie.id %>/<%= episode.number %>" 
                                   class="episode-btn" 
                                   data-episode="<%= episode.number %>" 
                                   data-movie="<%= movie.id %>">
                                    Tập <%= episode.number %>
                                </a>
                            <% }); %>
                        </div>
                    </div>
                <% } else if (movie.type === 'movie') { %>
                    <div style="margin-top: 2rem;">
                        <a href="/player/<%= movie.id %>/1" class="nav-btn" style="font-size: 1.2rem; padding: 15px 30px;">
                            ▶ Xem phim
                        </a>
                    </div>
                <% } %>
            </div>
        </div>

        <!-- Related Movies -->
        <section>
            <h2 class="section-title">Phim liên quan</h2>
            <div class="movie-grid">
                <% if (typeof relatedMovies !== 'undefined' && relatedMovies.length > 0) { %>
                    <% relatedMovies.forEach(function(related) { %>
                        <div class="movie-card" onclick="window.location.href='<%= related.type === 'series' ? '/series/' : '/movie/' %><%= related.id %>'">
                            <div class="movie-poster">
                                <% if (related.poster) { %>
                                    <img src="<%= related.poster %>" alt="<%= related.title %>" loading="lazy">
                                <% } else { %>
                                    <span>Không có ảnh</span>
                                <% } %>
                            </div>
                            <div class="movie-info">
                                <h3 class="movie-title"><%= related.title %></h3>
                                <p class="movie-meta">
                                    <%= related.year %> • 
                                    <% if (related.type === 'series') { %>
                                        <%= related.episodeCount %> tập
                                    <% } else { %>
                                        <%= related.duration %>
                                    <% } %> 
                                    • <%= related.genre %>
                                </p>
                                <div class="movie-rating">
                                    <span>★</span>
                                    <span><%= related.rating %></span>
                                </div>
                            </div>
                        </div>
                    <% }); %>
                <% } else { %>
                    <!-- Sample related movies -->
                    <div class="movie-card" onclick="window.location.href='/movie/2'">
                        <div class="movie-poster">
                            <span>Không có ảnh</span>
                        </div>
                        <div class="movie-info">
                            <h3 class="movie-title">Ballerina</h3>
                            <p class="movie-meta">2024 • 1h 45m • Hành động</p>
                            <div class="movie-rating">
                                <span>★</span>
                                <span>8.2</span>
                            </div>
                        </div>
                    </div>
                    <div class="movie-card" onclick="window.location.href='/movie/5'">
                        <div class="movie-poster">
                            <span>Không có ảnh</span>
                        </div>
                        <div class="movie-info">
                            <h3 class="movie-title">Heads of State</h3>
                            <p class="movie-meta">2024 • 1h 50m • Hành động</p>
                            <div class="movie-rating">
                                <span>★</span>
                                <span>7.5</span>
                            </div>
                        </div>
                    </div>
                    <div class="movie-card" onclick="window.location.href='/movie/6'">
                        <div class="movie-poster">
                            <span>Không có ảnh</span>
                        </div>
                        <div class="movie-info">
                            <h3 class="movie-title">Stand Your Ground</h3>
                            <p class="movie-meta">2024 • 1h 40m • Hành động</p>
                            <div class="movie-rating">
                                <span>★</span>
                                <span>7.2</span>
                            </div>
                        </div>
                    </div>
                    <div class="movie-card" onclick="window.location.href='/movie/4'">
                        <div class="movie-poster">
                            <span>Không có ảnh</span>
                        </div>
                        <div class="movie-info">
                            <h3 class="movie-title">Final Destination Bloodlines</h3>
                            <p class="movie-meta">2025 • 1h 55m • Kinh dị</p>
                            <div class="movie-rating">
                                <span>★</span>
                                <span>7.8</span>
                            </div>
                        </div>
                    </div>
                <% } %>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer style="background: #1a1a1a; padding: 2rem 0; margin-top: 3rem; text-align: center; color: #888;">
        <div style="max-width: 1200px; margin: 0 auto; padding: 0 20px;">
            <p>&copy; 2025 Video Website. Tất cả quyền được bảo lưu.</p>
            <p style="margin-top: 1rem; font-size: 0.9rem;">
                Website chỉ phục vụ mục đích giải trí. Chúng tôi không sở hữu bất kỳ nội dung video nào.
            </p>
        </div>
    </footer>

    <script src="/js/main.js"></script>
    <script>
        // Sample movie data for demonstration
        if (typeof movie === 'undefined') {
            window.movie = {
                id: 1,
                title: "Thunderbolts*",
                year: 2025,
                duration: "2h 15m",
                genre: "Hành động",
                country: "Mỹ",
                director: "Jake Schreier",
                cast: "Florence Pugh, Sebastian Stan, Wyatt Russell",
                rating: 8.5,
                views: 1200000,
                type: "movie",
                description: "Thunderbolts* là một bộ phim siêu anh hùng của Marvel Studios, kể về một nhóm các nhân vật phản diện được tuyển mộ để thực hiện các nhiệm vụ nguy hiểm cho chính phủ. Phim khám phá các chủ đề về sự cứu chuộc, lòng trung thành và ranh giới giữa thiện và ác.",
                poster: null
            };
        }
    </script>
</body>
</html> 